import{n as e}from"./rolldown-runtime-y2wrX6ue.js";import{C as t,E as n,f as r,h as i,p as a,v as o,x as s,y as c}from"./bootstrap-vendor-LDj2otZe.js";import{A as l,T as u}from"./vendor-6AfST0Cy.js";import{A as d,k as f,lt as p}from"./fontawesome-vendor-CDyZyS_m.js";import{r as m}from"./index-Bm7Tf09k.js";/* empty css               */var h=e(n(),1),g=t();function _(){let[e,t]=(0,h.useState)(1),[n,_]=(0,h.useState)(``),[v,y]=(0,h.useState)(``),[b,x]=(0,h.useState)(``),[S,C]=(0,h.useState)(``),[w,T]=(0,h.useState)(``),[E,D]=(0,h.useState)(!1),[O,k]=(0,h.useState)(null),[A,j]=(0,h.useState)(!1),{setUpRecaptcha:M,registerUser:N,checkUserExists:P}=m(),F=l();return(0,g.jsx)(i,{className:`d-flex align-items-center justify-content-center min-vh-100 signup-container`,children:(0,g.jsx)(o,{className:`chic-auth-card`,children:(0,g.jsxs)(o.Body,{className:`p-4`,children:[(0,g.jsx)(`h2`,{className:`text-center mb-4 chic-title`,children:e===1?`Create Account`:`Verify Phone`}),w&&(0,g.jsx)(s,{variant:`danger`,className:`small`,children:w}),e===1&&(0,g.jsxs)(a,{onSubmit:async e=>{if(e.preventDefault(),T(``),!v||v.length<10)return T(`Please enter a valid phone number.`);if(b.length<6)return T(`Password must be at least 6 characters.`);try{D(!0);let e=`+88`+v;if(await P(e))return D(!1),T(`This account exists! Please Log In to restore access.`);k(await M(e)),t(2)}catch(e){T(e.message)}D(!1)},children:[(0,g.jsxs)(a.Group,{className:`mb-3`,children:[(0,g.jsx)(a.Label,{className:`chic-label`,children:`Full Name`}),(0,g.jsx)(a.Control,{type:`text`,className:`chic-input`,required:!0,value:n,onChange:e=>_(e.target.value)})]}),(0,g.jsxs)(a.Group,{className:`mb-3`,children:[(0,g.jsxs)(a.Label,{className:`chic-label`,children:[`Phone Number `,(0,g.jsx)(`span`,{className:`text-danger`,children:`*`})]}),(0,g.jsxs)(r,{children:[(0,g.jsx)(r.Text,{className:`chic-prefix`,children:`+88`}),(0,g.jsx)(a.Control,{type:`tel`,className:`chic-input`,required:!0,value:v,onChange:e=>y(e.target.value.replace(/\D/g,``))})]})]}),(0,g.jsxs)(a.Group,{className:`mb-4`,children:[(0,g.jsxs)(a.Label,{className:`chic-label`,children:[`Password `,(0,g.jsx)(`span`,{className:`text-danger`,children:`*`})]}),(0,g.jsxs)(r,{children:[(0,g.jsx)(a.Control,{type:A?`text`:`password`,className:`chic-input`,required:!0,minLength:`6`,value:b,onChange:e=>x(e.target.value)}),(0,g.jsx)(c,{variant:`outline-secondary`,className:`chic-password-btn`,onClick:()=>j(!A),children:(0,g.jsx)(p,{icon:A?d:f})})]})]}),(0,g.jsx)(`div`,{id:`recaptcha-container`}),(0,g.jsx)(c,{disabled:E,className:`w-100 chic-btn`,type:`submit`,children:E?`Processing...`:`Sign Up`})]}),e===2&&(0,g.jsxs)(a,{onSubmit:async e=>{if(e.preventDefault(),T(``),S.length!==6)return T(`Enter the 6-digit code.`);try{D(!0);let e=(await O.confirm(S)).user;await N(e,n,`+88`+v,b),F(`/`)}catch(e){console.error(e),e.code===`auth/invalid-verification-code`?T(`Invalid OTP Code.`):T(`Failed to create account.`)}D(!1)},children:[(0,g.jsx)(`div`,{className:`text-center mb-4`,children:(0,g.jsxs)(`p`,{className:`text-muted`,children:[`Enter code sent to `,(0,g.jsxs)(`strong`,{children:[`+88`,v]})]})}),(0,g.jsx)(a.Group,{className:`mb-4`,children:(0,g.jsx)(a.Control,{type:`text`,placeholder:`------`,className:`chic-input text-center otp-input`,maxLength:`6`,required:!0,value:S,onChange:e=>C(e.target.value.replace(/\D/g,``))})}),(0,g.jsx)(c,{disabled:E,className:`w-100 chic-btn`,type:`submit`,children:E?`Verifying...`:`Confirm & Sign Up`}),(0,g.jsx)(`div`,{className:`text-center mt-3`,children:(0,g.jsx)(`span`,{className:`back-link`,onClick:()=>t(1),children:`Wrong number?`})})]}),(0,g.jsxs)(`div`,{className:`text-center mt-4 pt-3 border-top`,children:[(0,g.jsx)(`span`,{className:`text-muted small`,children:`Already have an account? `}),(0,g.jsx)(u,{to:`/login`,className:`chic-link`,children:`Log In`})]})]})})})}export{_ as default};