import{n as e}from"./rolldown-runtime-y2wrX6ue.js";import{C as t,E as n,c as r,h as i,y as a}from"./bootstrap-vendor-LDj2otZe.js";import{A as o,M as s,T as c,o as l,p as u}from"./vendor-6AfST0Cy.js";import{F as d,G as f,M as p,N as m,_ as h,b as g,d as _,f as v,g as y,j as b,l as x,lt as S,nt as C,o as w,s as T,y as E,z as D}from"./fontawesome-vendor-CDyZyS_m.js";import{i as O,n as k}from"./index-Bm7Tf09k.js";var A=e(n(),1),j=t(),M=A.memo(({product:e,addToCart:t,onBuyNow:n,theme:r})=>{let i=(e.stock||0)===0,a=e.comparePrice>e.price?Math.round((e.comparePrice-e.price)/e.comparePrice*100):0;return(0,j.jsxs)(`div`,{className:`shop-card ${i?`is-sold-out`:``}`,"data-theme":r,children:[(0,j.jsx)(c,{to:`/product/${e.id}`,className:`shop-card-img-link`,children:(0,j.jsxs)(`div`,{className:`shop-img-wrapper`,children:[(0,j.jsx)(`img`,{src:e.image,alt:e.name,className:`shop-img`,loading:`lazy`}),(0,j.jsxs)(`div`,{className:`shop-badges-top`,children:[a>0&&!i&&(0,j.jsxs)(`span`,{className:`badge-discount`,children:[`-`,a,`%`]}),e.isHotDeal&&!i&&(0,j.jsxs)(`span`,{className:`badge-hot`,children:[(0,j.jsx)(S,{icon:p}),` Hot`]}),e.isLimited&&!i&&(0,j.jsxs)(`span`,{className:`badge-limited`,children:[(0,j.jsx)(S,{icon:m}),` Ltd`]})]}),i&&(0,j.jsx)(`div`,{className:`sold-out-overlay`,children:(0,j.jsx)(`span`,{children:`Sold Out`})})]})}),(0,j.jsxs)(`div`,{className:`shop-card-body`,children:[(0,j.jsxs)(`div`,{className:`shop-card-meta`,children:[(0,j.jsx)(`span`,{className:`shop-category`,children:e.category}),e.concern&&e.concern!==`None`&&(0,j.jsxs)(`span`,{className:`shop-concern`,children:[` â€¢ `,e.concern]})]}),(0,j.jsx)(c,{to:`/product/${e.id}`,className:`shop-card-title-link`,children:(0,j.jsx)(`h3`,{className:`shop-card-title`,title:e.name,children:e.name})}),(0,j.jsx)(`div`,{className:`shop-price-row`,children:(0,j.jsxs)(`div`,{className:`shop-price-box`,children:[(0,j.jsxs)(`span`,{className:`current-price`,children:[`$`,e.price]}),e.comparePrice>e.price&&(0,j.jsxs)(`span`,{className:`old-price`,children:[`$`,e.comparePrice]})]})}),(0,j.jsxs)(`div`,{className:`shop-card-actions`,children:[(0,j.jsx)(`button`,{className:`shop-action-btn btn-cart`,onClick:n=>{n.preventDefault(),t(e)},disabled:i,title:`Add to Cart`,children:(0,j.jsx)(S,{icon:y})}),(0,j.jsxs)(`button`,{className:`shop-action-btn btn-buy`,onClick:t=>{t.preventDefault(),n(e)},disabled:i,children:[(0,j.jsx)(S,{icon:x,className:`me-2`}),` Buy Now`]})]})]})]})}),N=({section:e,addToCart:t,onBuyNow:n,theme:r,handleSeeAll:i})=>{let a=(0,A.useRef)(null),[o,s]=(0,A.useState)(!1),[c,l]=(0,A.useState)(!0),u=()=>{if(a.current){let{scrollLeft:e,scrollWidth:t,clientWidth:n}=a.current;s(e>10),l(e<t-n-10)}};(0,A.useEffect)(()=>(u(),window.addEventListener(`resize`,u),()=>window.removeEventListener(`resize`,u)),[e]);let d=e=>{if(a.current){let t=e===`left`?-320:320;a.current.scrollBy({left:t,behavior:`smooth`}),setTimeout(u,350)}};return(0,j.jsxs)(`div`,{className:`shop-section mb-5`,"data-theme":r,children:[(0,j.jsxs)(`div`,{className:`shop-section-header`,children:[(0,j.jsxs)(`h3`,{className:`section-title`,children:[e.icon,` `,e.name===`All`?`All Products`:e.name]}),(0,j.jsxs)(`button`,{className:`shop-view-all-btn`,onClick:()=>i(e.type,e.value),children:[`View Collection `,(0,j.jsx)(S,{icon:T,className:`ms-2 icon-move`})]})]}),(0,j.jsxs)(`div`,{className:`shop-horizontal-wrapper`,children:[(0,j.jsx)(`button`,{className:`shop-nav-btn prev ${o?``:`hidden`}`,onClick:()=>d(`left`),children:(0,j.jsx)(S,{icon:E})}),(0,j.jsx)(`div`,{className:`shop-horizontal-scroll`,ref:a,onScroll:u,children:e.products.map(e=>(0,j.jsx)(`div`,{className:`horizontal-item`,children:(0,j.jsx)(M,{product:e,addToCart:t,onBuyNow:n,theme:r})},e.id))}),(0,j.jsx)(`button`,{className:`shop-nav-btn next ${c?``:`hidden`}`,onClick:()=>d(`right`),children:(0,j.jsx)(S,{icon:g})})]})]})},P=({theme:e})=>{let[t,n]=(0,A.useState)([]),[c,p]=(0,A.useState)(!0),[m,g]=(0,A.useState)(20),[y,x]=(0,A.useState)(!1),[T,E]=s(),[P,F]=(0,A.useState)(!1),[I,L]=(0,A.useState)(`category`),[R,z]=(0,A.useState)(8),{addToCart:B}=k(),V=o(),H=(0,A.useMemo)(()=>T.get(`category`)?T.get(`category`).split(`,`):[],[T]),U=(0,A.useMemo)(()=>T.get(`concern`)?T.get(`concern`).split(`,`):[],[T]),W=T.get(`search`),G=T.get(`show`)===`trending`,K=T.get(`show`)===`special`,q=T.get(`show`)===`sale`,J=T.get(`show`)===`hot`,Y=T.get(`sort`)||`default`;(0,A.useEffect)(()=>{p(!0);let e=l(u(O,`products`),e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));t.sort((e,t)=>(parseInt(t.id)||0)-(parseInt(e.id)||0)),n(t),p(!1)});return()=>e()},[]);let X=(0,A.useMemo)(()=>[...new Set(t.map(e=>e.category).filter(Boolean))].sort(),[t]),Z=(0,A.useMemo)(()=>[...new Set(t.map(e=>e.concern).filter(e=>e&&e!==`None`))].sort(),[t]),Q=(0,A.useMemo)(()=>{let e=[...t];if(H.length>0&&!H.includes(`All`)&&(e=e.filter(e=>H.includes(e.category))),U.length>0&&!U.includes(`All`)&&(e=e.filter(e=>U.includes(e.concern))),W){let t=W.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.category?.toLowerCase().includes(t)||e.concern?.toLowerCase().includes(t))}return G&&(e=e.filter(e=>e.isTrending)),K&&(e=e.filter(e=>e.isLimited)),J&&(e=e.filter(e=>e.isHotDeal)),q&&(e=e.filter(e=>parseFloat(e.comparePrice)>parseFloat(e.price))),Y===`price_asc`?e.sort((e,t)=>e.price-t.price):Y===`price_desc`?e.sort((e,t)=>t.price-e.price):Y===`name_asc`&&e.sort((e,t)=>e.name.localeCompare(t.name)),e},[t,H,U,W,G,K,Y,q,J]);(0,A.useEffect)(()=>{let e=()=>{let e=window.innerWidth;z(e<768?4:e>=992?8:6)};return e(),window.addEventListener(`resize`,e),()=>window.removeEventListener(`resize`,e)},[]),(0,A.useEffect)(()=>{if(Q.length===0)return;let e=()=>{window.innerHeight+document.documentElement.scrollTop>=document.documentElement.scrollHeight-400&&!y&&m<Q.length&&(x(!0),setTimeout(()=>{g(e=>e+12),x(!1)},500))};return window.addEventListener(`scroll`,e),()=>window.removeEventListener(`scroll`,e)},[Q.length,m,y]);let $=(e,t)=>{let n=new URLSearchParams(T);if(e===`sort`)n.set(`sort`,t);else{let r=n.get(e),i=r?r.split(`,`):[];t===`All`?n.set(e,`All`):(i.includes(`All`)&&(i=i.filter(e=>e!==`All`)),i.includes(t)?i=i.filter(e=>e!==t):i.push(t),i.length>0?n.set(e,i.join(`,`)):n.set(e,`All`))}E(n),g(20)},ee=(e,t)=>{E({[e]:t}),window.scrollTo(0,0)},te=(0,A.useMemo)(()=>{let e=[];return e=I===`category`?[`All`,...X].map(e=>({name:e,type:`category`,value:e,products:e===`All`?t:t.filter(t=>t.category===e)})):I===`concern`?Z.map(e=>({name:e,type:`concern`,value:e,products:t.filter(t=>t.concern===e)})):[{name:`Flash Sale`,type:`show`,value:`hot`,icon:(0,j.jsx)(S,{icon:_,className:`text-warning me-2`}),products:t.filter(e=>e.isHotDeal)},{name:`On Sale`,type:`show`,value:`sale`,icon:(0,j.jsx)(S,{icon:f,className:`text-success me-2`}),products:t.filter(e=>e.comparePrice>e.price)}],e.filter(e=>e.products.length>0).map(e=>({...e,products:e.products.slice(0,R)}))},[t,X,Z,I,R]);if(c)return(0,j.jsx)(`div`,{className:`shop-loader-container`,children:(0,j.jsx)(`div`,{className:`shop-spinner`})});if(H.length>0||U.length>0||W||G||K||q||J){let t=Q.slice(0,m);return(0,j.jsxs)(`div`,{className:`shop-page theme-${e} detailed-view`,"data-theme":e,children:[(0,j.jsxs)(i,{className:`py-4`,children:[(0,j.jsxs)(`div`,{className:`shop-header-row`,children:[(0,j.jsxs)(`div`,{className:`d-flex align-items-center`,children:[(0,j.jsx)(a,{variant:`link`,className:`shop-back-btn p-0 me-3`,onClick:()=>E({}),children:(0,j.jsx)(S,{icon:w})}),(0,j.jsx)(`h2`,{className:`shop-page-title m-0`,children:`Shop`})]}),(0,j.jsxs)(`button`,{className:`shop-filter-btn`,onClick:()=>F(!0),children:[(0,j.jsx)(S,{icon:b,className:`me-2`}),` Filters`,(H.length>0&&!H.includes(`All`)||U.length>0)&&(0,j.jsx)(`span`,{className:`filter-badge ms-2`,children:H.filter(e=>e!==`All`).length+U.length})]})]}),(0,j.jsxs)(`div`,{className:`shop-chips-row`,children:[(0,j.jsx)(`button`,{className:`shop-chip ${H.includes(`All`)?`active`:``}`,onClick:()=>$(`category`,`All`),children:`All Categories`}),X.map(e=>(0,j.jsx)(`button`,{className:`shop-chip ${H.includes(e)?`active`:``}`,onClick:()=>$(`category`,e),children:e},e))]}),(0,j.jsx)(`div`,{className:`shop-chips-row mt-2`,children:Z.map(e=>(0,j.jsx)(`button`,{className:`shop-chip ${U.includes(e)?`active`:``}`,onClick:()=>$(`concern`,e),children:e},e))}),(0,j.jsx)(`div`,{className:`shop-grid mt-4`,children:t.map(t=>(0,j.jsx)(M,{product:t,addToCart:B,onBuyNow:e=>V(`/checkout`,{state:{directCheckoutItems:[{...e,quantity:1}]}}),theme:e},t.id))}),t.length===0&&(0,j.jsxs)(`div`,{className:`shop-empty-state text-center py-5`,children:[(0,j.jsx)(S,{icon:v,size:`3x`,className:`mb-3 opacity-50`}),(0,j.jsx)(`h5`,{children:`No products match these filters`}),(0,j.jsx)(a,{variant:`outline-dark`,className:`mt-3`,onClick:()=>E({category:`All`}),children:`Show All Products`})]})]}),(0,j.jsxs)(r,{show:P,onHide:()=>F(!1),placement:`end`,className:`shop-filter-drawer theme-${e}`,children:[(0,j.jsx)(r.Header,{closeButton:!0,className:`border-bottom`,children:(0,j.jsx)(r.Title,{children:`Filter & Sort`})}),(0,j.jsxs)(r.Body,{className:`d-flex flex-column p-0`,children:[(0,j.jsxs)(`div`,{className:`filter-scroll-area flex-grow-1 p-4`,children:[(0,j.jsxs)(`div`,{className:`filter-section`,children:[(0,j.jsx)(`h6`,{className:`filter-heading`,children:`Sort By`}),(0,j.jsx)(`div`,{className:`sort-grid`,children:[{label:`Default`,val:`default`},{label:`Price: Low-High`,val:`price_asc`},{label:`Price: High-Low`,val:`price_desc`}].map(e=>(0,j.jsx)(`button`,{className:`sort-option ${Y===e.val?`selected`:``}`,onClick:()=>$(`sort`,e.val),children:e.label},e.val))})]}),(0,j.jsx)(`hr`,{className:`my-4`}),(0,j.jsxs)(`div`,{className:`filter-section`,children:[(0,j.jsx)(`h6`,{className:`filter-heading`,children:`Categories`}),X.map(e=>(0,j.jsxs)(`label`,{className:`custom-checkbox-row`,children:[(0,j.jsx)(`input`,{type:`checkbox`,checked:H.includes(e),onChange:()=>$(`category`,e)}),(0,j.jsx)(`span`,{className:`custom-checkmark`,children:(0,j.jsx)(S,{icon:h,className:`check-icon`})}),(0,j.jsx)(`span`,{className:`label-text`,children:e})]},e))]}),(0,j.jsx)(`hr`,{className:`my-4`}),(0,j.jsxs)(`div`,{className:`filter-section`,children:[(0,j.jsx)(`h6`,{className:`filter-heading`,children:`Concerns`}),Z.map(e=>(0,j.jsxs)(`label`,{className:`custom-checkbox-row`,children:[(0,j.jsx)(`input`,{type:`checkbox`,checked:U.includes(e),onChange:()=>$(`concern`,e)}),(0,j.jsx)(`span`,{className:`custom-checkmark`,children:(0,j.jsx)(S,{icon:h,className:`check-icon`})}),(0,j.jsx)(`span`,{className:`label-text`,children:e})]},e))]})]}),(0,j.jsxs)(`div`,{className:`drawer-bottom-bar`,children:[(0,j.jsxs)(`div`,{className:`d-flex justify-content-between align-items-center mb-2`,children:[(0,j.jsxs)(`span`,{className:`result-count`,children:[Q.length,` items found`]}),(0,j.jsx)(`button`,{className:`btn-clear-filters`,onClick:()=>E({category:`All`}),children:`Clear All`})]}),(0,j.jsx)(a,{className:`w-100 py-3 fw-bold btn-show-results`,onClick:()=>F(!1),children:`Show Results`})]})]})]})]})}return(0,j.jsx)(`div`,{className:`shop-page theme-${e} collections-view`,"data-theme":e,children:(0,j.jsxs)(i,{className:`py-5`,children:[(0,j.jsx)(`h1`,{className:`shop-main-heading text-center mb-4`,children:`Shop Collections`}),(0,j.jsxs)(`div`,{className:`shop-tab-switcher mb-5`,children:[(0,j.jsxs)(`button`,{className:`tab-btn ${I===`category`?`active`:``}`,onClick:()=>L(`category`),children:[(0,j.jsx)(S,{icon:D,className:`me-2`}),` Categories`]}),(0,j.jsxs)(`button`,{className:`tab-btn ${I===`concern`?`active`:``}`,onClick:()=>L(`concern`),children:[(0,j.jsx)(S,{icon:d,className:`me-2`}),` Concerns`]}),(0,j.jsxs)(`button`,{className:`tab-btn ${I===`offers`?`active`:``}`,onClick:()=>L(`offers`),children:[(0,j.jsx)(S,{icon:C,className:`me-2`}),` Offers`]})]}),te.map(t=>(0,j.jsx)(N,{section:t,addToCart:B,onBuyNow:e=>V(`/checkout`,{state:{directCheckoutItems:[{...e,quantity:1}]}}),theme:e,handleSeeAll:ee},t.name))]})})};export{P as default};